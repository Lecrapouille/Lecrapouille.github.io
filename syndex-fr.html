<!-- This page was generated by script Sun 29 Sep 19 -->

<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

<!-- HTML META -->
<head>
<title>Logiciel de g&eacute;n&eacute;ration de code distribu&eacute; SynDEx</title>
<meta name="author" content="Quentin Quadrat" />
<meta name="copyright" content="Creative Common BY-NC-SA" />
<meta name="keywords" content="SynDEx software" />
<meta name="description" content="A introduction to SynDEX software developped by INRIA" />
<meta name="generator" content="GNU m4" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/styles.css" rel="stylesheet" type="text/css" />
</head>

<!-- HTML BODY -->
<body><a id="top_page" name="top_page"></a>
<table id="document">

  <!-- DOCUMENT HEADER -->

  <!-- Page Title -->
  <tr>
    <td colspan="2">
      <div id="main_title">
        Logiciel de g&eacute;n&eacute;ration de code distribu&eacute; SynDEx
      </div>
    </td>
    <td id="right_top_border"></td>
  </tr>

  <!-- Primary Menu -->
  <tr>
    <td colspan="2">
      <!-- Begin Menu -->
<div id="primary_header">
<ul class="rubriques2">
<li><a href="helico_intro-fr.html"><img class="icone20" src="icons/gear.png" alt=""/>Syst&egrave;mes embarqu&eacute;s</a></li>
<li><a href="dyna-fr.html"><img class="icone20" src="icons/read.png" alt=""/>Tutoriels</a></li>
<li><a href="simtadyn-fr.html"><img class="icone20" src="icons/eyes.png" alt=""/>Projets informatiques</a></li>
<li><a href="index-fr.html"><img class="icone20" src="icons/home.png" alt=""/>Accueil</a></li>
</ul>
</div>
<!-- End Menu -->
    </td>
    <td id="right_border"> <!-- empty --> </td>
  </tr>

  <!-- Secondary Menu -->
  <tr>
    <td colspan="2">
      <!-- Begin Menu -->
<div id="secondary_header">
<ul class="rubriques3">
<li><a href="bsp-fr.html">BSP</a></li>
<li id="actif3">SynDEX</li>
<li><a href="maxplus-fr.html">Bo&icirc;te &agrave; outils Max+</a></li>
<li><a href="forth-fr.html">Interpr&eacute;teur Forth</a></li>
<li><a href="dyna-fr.html">Principe moindre action</a></li>
</ul>
</div>
<!-- End Menu -->
    </td>
    <td id="right_border"> <!-- empty --> </td>
  </tr>

  <!-- DOCUMENT BODY -->
  <tr>
    <!-- BEGIN LEFT BORDER -->
    <td id="left_border">
        <div id="floating_border">
           <!-- Translated Pages -->
           <p><img src="icons/fr.png" style="border:0;" alt="fr"/> <a href="syndex-en.html"><img src="icons/en.png" style="border:0;" alt="en"/></a></p>

           <!-- BEGIN LEFT BORDER DIVERSION -->
           <!-- Begin Table of Contents -->
<h1>Table des mati&egrave;res:</h1>
<ul class="items">
<li><a href="#generated"><img class="icone7" src="icons/bullet.gif" alt=""/>Exemple de code g&eacute;n&eacute;r&eacute;.</a></li>
<li><a href="#analyse"><img class="icone7" src="icons/bullet.gif" alt=""/>Analyse du code macro par macro.</a></li>
<li><a href="#"><img class="icone7" src="icons/bullet.gif" alt=""/>TODO.</a></li>
</ul><!-- End Table of Contents -->

           <!-- END LEFT BORDER DIVERSION -->

<br/><hr/><!-- Begin Badges -->
<p>Les documents (PDF, codes sources, programmes, ...) fournis sur ce site sont mis &agrave; disposition sous licences </p>
<table width="100%" align="center">
<tr><td colspan="2"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.fr"><img alt="CC" style="border:0;" height="60" width="128" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" /></a></td><td><a href="https://www.gnu.org/licenses/gpl-3.0.fr.html"><img alt="GNU GPL" style="border:0;" src="http://creativecommons.org/images/public/cc-GPL-a.png" /></a></td></tr>
<tr><td><a href="http://validator.w3.org/check?uri=referer">
<img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!"
style="border:0" height="15" width="66" /></a></td><td><a href="http://jigsaw.w3.org/css-validator/check/referer">
<img src="icons/css.gif" alt="Valid CSS!" style="border:0" height="15" width="66" /></a></td><td><!-- phpmyvisites -->
<a href="http://st.free.fr/" title="phpMyVisites | Open source web analytics"
onclick="window.open(this.href);return(false);"><script type="text/javascript">
<!--
var a_vars = Array();
var pagename='';
var phpmyvisitesSite = 21477; var phpmyvisitesURL = "http://st.free.fr/phpmyvisites.php";
//-->
</script>
<script language="javascript" src="http://st.free.fr/phpmyvisites.js" type="text/javascript"></script>
<object><noscript><p>phpMyVisites | Open source web analytics
<img src="http://st.free.fr/phpmyvisites.php" alt="Statistics" style="border:0" />
</p></noscript></object></a>
<!-- /phpmyvisites --></td></tr>
</table><hr/>
<!-- End Badges -->
<a href="https://github.com/Lecrapouille/WebSiteGenerator" target="_blank"><img src="icons/github.png" alt="github" height="40" width="40" border="0"/></a> <img src="icons/github.png" alt="github" height="16" width="16" border="0"/>
<!-- Left Heading -->
<h1><!-- Update -->
Page auto-g&eacute;n&eacute;r&eacute;e le :</h1>
<ul class="items">
 <li><a href="https://github.com/Lecrapouille/WebSiteGenerator"><img class="icone7" src="icons/bullet.gif" alt=""/>Sun 29 Sep 19.</a></li> 
</ul>

<hr/>
        </div>
    </td>
    <!-- END LEFT BORDER -->

    <!-- BEGIN ARTICLE -->
    <td id="article">
        

<!-- Section: D&eacute;couverte du logiciel SynDEx -->
<h1>D&eacute;couverte du logiciel SynDEx</h1>

<!-- Subsection: Pr&eacute;sentation -->
<a id="pres" name="pres"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Pr&eacute;sentation</h2>
<div class="boite"> 

<p>Nous avons vu <a href="scicos-fr.html">dans ce tutoriel</a>, que le logiciel
<a href="http://www.scicoslab.org/">Scicoslab</a> peut facilement int&eacute;grer des biblioth&egrave;ques &eacute;crites en
langage C pour interagir avec des syst&egrave;mes embarqu&eacute;s via des capteurs
ou des actionneurs (cam&eacute;ra, joystick, port s&eacute;rie). Nous avons
&eacute;galement vu qu'il n'est pas toujours ais&eacute; de l'ins&eacute;rer dans une
boucle d'asservissement pour contr&ocirc;ler des syst&egrave;mes temps r&eacute;el (comme
pour l'h&eacute;licopt&egrave;re quatre rotors). N&eacute;anmoins, il est toujours possible
de demander &agrave; Scicos de g&eacute;n&eacute;rer automatiquement du code C &agrave; partir
d'un sch&eacute;ma block. Ce code peut &ecirc;tre compil&eacute;, par exemple, pour un
Linux temps r&eacute;el (un Linux dont le noyau a &eacute;t&eacute; patch&eacute; pour utiliser le
temps r&eacute;el dur).</p>

<p>On peut vouloir &ecirc;tre encore plus ambitieux et, toujours &agrave; partir du
m&ecirc;me sch&eacute;ma block, vouloir g&eacute;n&eacute;rer automatiquement du code pour
n'importe quelle architecture multiprocesseur et r&eacute;partir au mieux les
op&eacute;rations d'un programme qui peuvent &ecirc;tre ex&eacute;cut&eacute;es en
parall&egrave;le. Scicos ne le fait pas automatiquement mais, par contre, il
existe un logiciel nomm&eacute; <a href="http://www.syndex.org/download.htm">SynDEx</a> qui permet de g&eacute;n&eacute;rer du code
distribu&eacute;.</p>

<p>Cette page fait une rapide pr&eacute;sentation du logiciel SynDEx. Ce
logiciel fut utilis&eacute;e par exemple pour un projet personnel h&eacute;licopt&egrave;re
quatre rotors comprenant deux micro-controlleurs. Un noyau d'ex&eacute;cutif
(terme SynDEx que l'on peut d&eacute;finir en premi&egrave;re approximation par
biblioth&egrave;que) &eacute;crite en C permet au logiciel SynDEx de g&eacute;n&eacute;rer du code
pour les microprocesseurs dsPIC.</p>

<p>NOTE: cette biblioth&egrave;que est en cours de d&eacute;veloppement et n'est pas
encore disponible sur ce site.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: Qu'est ce que la m&eacute;thodologie AAA ? -->
<a id="AAA" name="AAA"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Qu'est ce que la m&eacute;thodologie AAA ?</h2>
<div class="boite"> 

<p>Le document
<img class="icone30" src="icons/pdf.png" alt="pdf"/><a href="http://www.syndex.org/publications/pubs/RR98/RR98.pdf">Mod&egrave;le
d'ex&eacute;cutif distribu&eacute; temps r&eacute;el pour SynDEx</a> d&eacute;crit la m&eacute;thodologie
AAA que nous allons r&eacute;sumer ici.</p>

<p>La m&eacute;thodologie d'<strong>Ad&eacute;quation Algorithme Architecture</strong> (AAA)
est bas&eacute;e sur des mod&egrave;les de graphes pour sp&eacute;cifier d'une part
l'algorithme et d'autre part l'architecture mat&eacute;rielle. La description
de l'algorithme permet de mettre en &eacute;vidence le parall&eacute;lisme potentiel
tandis que celle de l'architecture met en &eacute;vidence le parall&eacute;lisme
disponible. Cette m&eacute;thode consiste en fait &agrave; d&eacute;crire l'implantation en
terme de transformations de graphes. En effet, le graphe mod&eacute;lisant
l'algorithme est transform&eacute; jusqu'&agrave; ce qu'il corresponde au graphe
mat&eacute;riel mod&eacute;lisant l'architecture. L'implantation de l'algorithme sur
l'architecture consiste donc &agrave; r&eacute;duire le parall&eacute;lisme potentiel au
parall&eacute;lisme disponible tout en cherchant &agrave; respecter les contraintes
temps r&eacute;el. Toutes ces transformations sont effectu&eacute;es avant
l'ex&eacute;cution en temps r&eacute;el de l'application. Elles correspondent &agrave; une
distribution et &agrave; un ordonnancement des diff&eacute;rents calculs sur les
processeurs et des communications sur les liaisons physiques
inter-processeurs. C'est &agrave; partir de ces allocations spatiales et
temporelles qu'un ex&eacute;cutif va pouvoir &ecirc;tre g&eacute;n&eacute;r&eacute; et permettre
l'ex&eacute;cution de l'algorithme sur l'architecture construite avec des
processeurs. Cependant, pour que cette implantation soit vraiment
efficace, il est n&eacute;cessaire de r&eacute;aliser une ad&eacute;quation entre
l'algorithme et l'architecture. Celle-ci consiste &agrave; choisir parmi
toutes les transformations propos&eacute;es celle qui optimise les
performances temps r&eacute;el.</p>

<div class="centrer"><a href="syndex/AAA.jpg"><img class="caption" src="syndex/AAA.jpg" alt="picture"/></a><p>Diagramme r&eacute;sumant la m&eacute;thodologie AAA.</p></div>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: Qu'est ce que SynDEx ? -->
<a id="what" name="what"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Qu'est ce que SynDEx ?</h2>
<div class="boite"> 

<p><a href="http://www.syndex.org/download.htm">SynDEx</a> est un logiciel de CAO mettant en oeuvre la m&eacute;thodologie AAA
pour le prototypage rapide et l'optimisation de la mise en oeuvre
d'applications distribu&eacute;es temps r&eacute;el embarqu&eacute;es. A partir d'un
algorithme et d'une architecture tous deux donn&eacute;s sous forme de
graphe, SynDEx g&eacute;n&egrave;re une impl&eacute;mentation distribu&eacute;e de l'algorithme en
langage <a href="https://www.gnu.org/software/m4/manual/m4.html">GNU M4</a>
appel&eacute; ex&eacute;cutif. On peut &eacute;gallement obtenir un graphe d'algorithme en
exportant depuis Scicos un sch&eacute;ma pour SynDEx.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Section: Mod&egrave;les d'algorithmes et d'architectures -->
<h1>Mod&egrave;les d'algorithmes et d'architectures</h1>

<!-- Subsection: Algorithmes -->
<a id="algo" name="algo"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Algorithmes</h2>
<div class="boite"> 

<p>Un algorithme est mod&eacute;lis&eacute; par un graphe flot de donn&eacute;es
&eacute;ventuellement conditionn&eacute; (il s'agit d'un hypergraphe orient&eacute;), qui
se compose de sommets et d'arcs. Un sommet est une op&eacute;ration et un arc
un flot de donn&eacute;es, c'est-&agrave;-dire un transfert de donn&eacute;es entre deux
op&eacute;rations.</p>

<div class="centrer"><a href="syndex/algo.jpg"><img class="caption" src="syndex/algo.jpg" alt="picture"/></a><p>Exemple de graphe d'algorithme sous SynDEx.</p></div>

<p>Une op&eacute;ration peut-&ecirc;tre soit un calcul (comme une addition), soit
une m&eacute;moire d'&eacute;tat (retard), soit un conditionnement ou encore une
entr&eacute;e-sortie. Les sommets qui ne poss&egrave;dent pas de pr&eacute;d&eacute;cesseur sont
des interfaces d'entr&eacute;e (capteurs recevant les stimuli de
l'environnement) et ceux qui ne poss&egrave;dent pas de successeur
repr&eacute;sentent des interfaces de sortie (actionneurs produisant les
actions vers l'environnement). Dans le cas d'une op&eacute;ration de calcul,
la consommation des entr&eacute;es pr&eacute;c&egrave;de la production des sorties.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: Architecture -->
<a id="archi" name="archi"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Architecture</h2>
<div class="boite"> 

<p>Une architecture est mod&eacute;lis&eacute;e par un graphe dont chaque sommet
repr&eacute;sente un processeur ou un m&eacute;dia de communication, et chaque arc
repr&eacute;sente une connexion entre un processeur et un m&eacute;dia de
communications (SAM ou RAM). On ne peut connecter directement deux
processeurs ou deux m&eacute;dias. Chaque sommet est une machine s&eacute;quentielle
qui s&eacute;quence soit des op&eacute;rations de calcul pour les processeurs, soit
des op&eacute;rations de communications pour les m&eacute;dias de communications.</p>

<div class="centrer"><a href="syndex/archi.jpg"><img class="caption" src="syndex/archi.jpg" alt="picture"/></a><p>Exemple de graphe d'architecture sous SynDEx.</p></div>

<p>Un processeur et les m&eacute;dias de communication sont des repr&eacute;sentations
abstraites de ce que peut &ecirc;tre un PC, un Macintosh, un processus
(Window, Unix, Mac) ou un microcontr&ocirc;leur PIC, dsPIC ou bien des
m&eacute;dias de communications comme le TCP/IP, bus CAN, USB, FireWire, port
s&eacute;rie.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: Heuristique de distribution et d'ordonnancement -->
<a id="heuri" name="heuri"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Heuristique de distribution et d'ordonnancement</h2>
<div class="boite"> 

<p>Une fois les sp&eacute;cifications de l'algorithme et de l'architecture
effectu&eacute;es, il est n&eacute;cessaire de r&eacute;aliser l'ad&eacute;quation. Celle-ci est
charg&eacute;e de respecter d'une part l'ordre des &eacute;v&eacute;nements pr&eacute;cis&eacute;s lors
de la sp&eacute;cification de l'algorithme et d'autre part les contraintes
temps r&eacute;el. Pour cela, parmi toutes les transformations de graphes
possibles, est choisie celle qui optimise les performances temps r&eacute;el
de l'implantation en terme de latence. La latence ou temps de r&eacute;ponse
R est donn&eacute;e par la longueur du chemin critique du graphe logiciel,
dont les sommets sont valu&eacute;s par les dur&eacute;es d'ex&eacute;cution des op&eacute;rations
correspondantes y compris celles des communications inter-processeurs.</p>

<p>Afin de r&eacute;soudre ce probl&egrave;me d'optimisation du temps de r&eacute;ponse, une
heuristique a &eacute;t&eacute; d&eacute;velopp&eacute;e. Il s'agit d'un algorithme glouton dont
chaque &eacute;tape alloue une op&eacute;ration &agrave; un processeur, route les
&eacute;ventuelles communications inter-processeurs c'est-&agrave;-dire cr&eacute;e des
op&eacute;rations de communication et alloue chacune d'elles &agrave; une liaison
physique. L'ordonnancement des op&eacute;rations de calculs ou de
communication est directement d&eacute;duit de l'ordre dans lequel elles sont
allou&eacute;es.</p>

<p>Cette m&eacute;thode consiste donc &agrave; faire progresser le long du graphe
une coupe s&eacute;parant les op&eacute;rations d&eacute;j&agrave; plac&eacute;es sur des processeurs de
celles qui ne le sont pas encore. La progression se fait en respectant
les pr&eacute;c&eacute;dences du graphe logiciel. De toutes les op&eacute;rations &agrave;
distribuer sur la coupe et de tous les processeurs, on choisit la
paire qui optimise une fonction locale de co&ucirc;t prenant en compte :</p>

<p>Les diff&eacute;rences entre dates locales d'ex&eacute;cution au plus t&ocirc;t et au
plus tard (schedule flexibility) l'allongement du temps global
d'ex&eacute;cution : le temps de r&eacute;ponse (latence) le rythme d'entr&eacute;e
(cadence) la capacit&eacute; m&eacute;moire.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Section: En r&eacute;sum&eacute; -->
<h1>En r&eacute;sum&eacute;</h1>

<!-- Subsection: Entr&eacute;es de SynDEx -->
<a id="input" name="input"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Entr&eacute;es de SynDEx</h2>
<div class="boite"> 

<p>Pour r&eacute;sum&eacute;, SynDEx prend en entr&eacute;e :</p>
<!-- Begin List -->
<ul>
<li>Un graphe d'algorithme (obtenu, par exemple, &agrave; partir d'un sch&eacute;ma
bloc Scicos).</li>
<li>Un graphe d'architecture constitu&eacute; de processeurs (rectangles bleus
et blancs) et de m&eacute;dias de communication (ronds bleus et arcs)</li>
<li>Les dur&eacute;es des t&acirc;ches et des communications (et dans la prochaine
version leur p&eacute;riode).</li>
</ul>
<!-- End list -->

<table width="90%" align="center">
    <tr>
        <td align="center"><div class="centrer"><a href="syndex/algo.jpg"><img class="caption" src="syndex/algo.jpg" alt="picture"/></a><p>Graphe d'algorithme</p></div></td>
        <td align="center"><div class="centrer"><a href="syndex/archi.jpg"><img class="caption" src="syndex/archi.jpg" alt="picture"/></a><p>Draphe d'architecture</p></div></td>
        <td align="center"><div class="centrer"><a href="syndex/duration.jpg"><img class="caption" src="syndex/duration.jpg" alt="picture"/></a><p>Dur&eacute;e des op&eacute;rations</p></div></td>
    </tr>
</table>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: Sorties de SynDEx -->
<a id="output" name="output"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Sorties de SynDEx</h2>
<div class="boite"> 

<p>SynDEx g&eacute;n&egrave;re automatiquement :</p>
<!-- Begin List -->
<ul>
<li>Un agenda des t&acirc;ches &agrave; ex&eacute;cuter dans le temps.</li>
<li>Des ex&eacute;cutifs &agrave; savoir les programmes pour chaque processeur &eacute;crit en pseudo code.</li>
</ul>
<!-- End list -->

<p>L'agenda des t&acirc;ches &agrave; ex&eacute;cuter est constitu&eacute; de colonnes
symbolisant les processeurs de l'architecture ainsi que les m&eacute;dias de
communication :</p>

<!-- Begin List -->
<ul>
<li>Le contenu des colonnes sont les t&acirc;ches ou les envois/r&eacute;ceptions &agrave;
ex&eacute;cuter dans le temps (de haut en bas) pour chaque processeur ou
chaque m&eacute;dia.</li>
<li>Les &eacute;paisseurs des t&acirc;ches donnent la dur&eacute;e d'ex&eacute;cution.</li>
<li>La couleur orange est l'op&eacute;ration (ou communication) point&eacute;e par le
curseur de la souris (on ne la voit pas sur la capture d'&eacute;cran).</li>
<li>La couleur verte indique les op&eacute;rations qui sont ex&eacute;cut&eacute;es avant
l'op&eacute;ration orange et la couleur rouge indique les op&eacute;rations qui
s'ex&eacute;cutent apr&egrave;s l'op&eacute;ration orange.</li>
</ul>
<!-- End list -->

<table width="90%" align="center">
    <tr>
        <td align="center"><div class="centrer"><a href="syndex/schedul.jpg"><img class="caption" src="syndex/schedul.jpg" alt="picture"/></a><p>Agenda des t&acirc;ches</p></div></td>
        <td align="center"><div class="centrer"><a href="syndex/executif.jpg"><img class="caption" src="syndex/executif.jpg" alt="picture"/></a><p>Ex&eacute;cutif</p></div></td>
    </tr>
</table>

<p>Un ex&eacute;cutif est la repr&eacute;sentation algorithmique de l'agenda. A
chaque colonne, un ex&eacute;cutif lui correspond. Il y a donc un ex&eacute;cutif
g&eacute;n&eacute;r&eacute; par processeur. Le pseudo code est en fait la syntaxe du
langage de macroprocessing GNU M4 ext link. Comme on peut le voir sur
l'image ci dessus, chaque ex&eacute;cutif g&eacute;n&eacute;r&eacute; contient une thread main qui
ex&eacute;cute les calculs (loi de commande, capteurs, actionneurs) et au
moins une thread de communication qui appellent les fonctions de haut
niveau envoyer et recevoir une donn&eacute;e.</p>

<p>Dans la section ici, on explique plus en d&eacute;tail le fonctionnement
de l'ex&eacute;cutif.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: Travail de l'utilisateur -->
<a id="userwork" name="userwork"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Travail de l'utilisateur</h2>
<div class="boite"> 

<p><strong>Entr&eacute;es de SynDEx :</strong> L'utilisateur doit dessiner dans l'IHM
les deux types de graphes et d&eacute;finir les p&eacute;riodes de chaque t&acirc;ches et
de communication. La cr&eacute;ation du graphe d'algorithme peut &ecirc;tre obtenu
&agrave; partir d'un sch&eacute;ma bloc Scicos via une passerelle &agrave; installer pour
Scicos
<a href="http://www.syndex.org/scicosSyndexGateway/index.htm">S2S</a>.</p>

<p><strong>Sorties de SynDEx :</strong> Les ex&eacute;cutifs g&eacute;n&eacute;r&eacute;s ne peuvent pas
&ecirc;tre exploit&eacute;s tels quels. Il faut d'abord les traduire dans un
langage adapt&eacute; (C, assembleur, ...) puis les compiler et les flasher
dans le micro contr&ocirc;leur. Cette &eacute;tape n'est malheureusement pas
automatis&eacute;e dans SynDEx &agrave; cause du trop grand nombre d'architectures
disponibles sur le march&eacute; (il lui faudrait une base de donn&eacute;es des
registres disponibles pour chaque architecture). C'est le r&ocirc;le du
cross-compilateur de les conna&icirc;tre. Il faut pouvoir associer &agrave; chaque
macro M4 une fonction dans le langage d&eacute;sir&eacute;. L'utilisateur doit
&eacute;crire des fichiers d'association entre macro M4 et langage
d&eacute;sir&eacute;. L'ensemble de ces fichiers est appel&eacute; <em>noyau
d'ex&eacute;cutif</em>.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Section: Comprendre le macro code des ex&eacute;cutifs -->
<h1>Comprendre le macro code des ex&eacute;cutifs</h1>

<!-- Subsection: Exemple de code g&eacute;n&eacute;r&eacute; -->
<a id="generated" name="generated"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Exemple de code g&eacute;n&eacute;r&eacute;</h2>
<div class="boite"> 

<p>D'apparence complexe, ce code est en fait tr&egrave;s simple &agrave; comprendre
puisque tous les ex&eacute;cutifs g&eacute;n&eacute;r&eacute;s auront tous le m&ecirc;me squelette.</p>

<div class="code"><pre><code>processor_(dsPIC30F,dsPICmaitre,H4H_syndex,SynDEx-6.8.5 (C) INRIA)

semaphores_(
  Semaphore_Thread_RxTx,
  EnvoiMot_a_dsPICmaitre_RxTx_empty,
  EnvoiMot_a_dsPICmaitre_RxTx_full,
  prep_message_out_dsPICmaitre_RxTx_empty,
  prep_message_out_dsPICmaitre_RxTx_full)

alloc_(int,EnvoiMot_a,100)
alloc_(int,prep_message_out,100)

thread_(USART,RxTx,dsPICmaitre,MacBook)
  loadDnto_(,MacBook)
  Pre0_(prep_message_out_dsPICmaitre_RxTx_empty,)
  loop_
    Suc1_(EnvoiMot_a_dsPICmaitre_RxTx_empty,)
    recv_(EnvoiMot_a,PCnonEmbarque,MacBook,dsPICmaitre)
    Pre0_(EnvoiMot_a_dsPICmaitre_RxTx_full,)
    Suc1_(prep_message_out_dsPICmaitre_RxTx_full,)
    send_(prep_message_out,dsPIC30F,dsPICmaitre,MacBook)
    Pre0_(prep_message_out_dsPICmaitre_RxTx_empty,)
  endloop_
  saveFrom_(,MacBook)
endthread_

main_
  proc_init_
  spawn_thread_(RxTx)
  MonGrosCalcul(EnvoiMot_a,prep_message_out)
  Pre1_(EnvoiMot_a_dsPICmaitre_RxTx_empty,RxTx)
  loop_
    Suc0_(EnvoiMot_a_dsPICmaitre_RxTx_full,RxTx)
    Suc0_(prep_message_out_dsPICmaitre_RxTx_empty,RxTx)
    MonGrosCalcul(EnvoiMot_a,prep_message_out)
    Pre1_(prep_message_out_dsPICmaitre_RxTx_full,RxTx)
    Pre1_(EnvoiMot_a_dsPICmaitre_RxTx_empty,RxTx)
  endloop_
  wait_endthread_(Semaphore_Thread_RxTx)
endmain_

endprocessor_
</code></pre></div>

<p>Comme dit pr&eacute;c&eacute;demment, ce genre de pseudo
code devra &ecirc;tre traduit dans un langage &eacute;volu&eacute; avant de pouvoir &ecirc;tre
compil&eacute;. Ici, on utilisera comme langage cible le langage C pour plus
de facilit&eacute;. Le programme obtenu apr&egrave;s compilation pourra &ecirc;tre ex&eacute;cut&eacute;
sur un OS comme Windows, Linux ou Mac ou sur un microcontr&ocirc;leur comme
un (ds)PIC.</p>

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: Analyse du code macro par macro -->
<a id="analyse" name="analyse"></a><h2><img class="icone20" src="icons/read.png" alt=""/>Analyse du code macro par macro</h2>
<div class="boite"> 

<p>Voici la liste exhaustive des macros &agrave; comprendre ainsi que leur
r&ocirc;le.</p>

<p>La macro <strong>processor_</strong> d&eacute;finit les informations du processeur
concern&eacute;. Par exemple :</p>

<div class="code"><pre><code>processor_(dsPIC30F,dsPICmaitre,H4H_syndex,...)
</code></pre></div>

<p>Indique que, dans le cadre de l'application SynDEx nomm&eacute;e
H4H_syndex.sdx, ce code est destin&eacute; au processeur nomm&eacute; dsPICmaitre
qui est du type dsPIC30Fxxxx.</p>

La macro semaphores_ d&eacute;finie tous les s&eacute;maphores binaires (empty ou full) n&eacute;cessaires &agrave; la bonne synchronisation des threads de calcul et de communication de notre programme. A l'initialisation du processeur ces s&eacute;maphores sont TOUTES initialis&eacute;es &agrave; 0 (empty). Pour l'instant, pas besoin d'en savoir plus sur leur r&ocirc;le.

semaphores_(
  ...
  EnvoiMot_a_dsPICmaitre_RxTx_empty,
  EnvoiMot_a_dsPICmaitre_RxTx_full)

La macro alloc_ r&eacute;serve un tableau statique de N &eacute;l&eacute;ments d'un type donn&eacute;. La taille du tableau ne peut &eacute;voluer dynamiquement.

alloc_(int,EnvoiMot_o,100)

Par exemple ici on d&eacute;finit un tableau nomm&eacute; EnvoiMot_o de cent &eacute;l&eacute;ments de type entier (en g&eacute;n&eacute;ral cod&eacute; sur 32 bits pour le langage C mais tout d&eacute;pend du choix du langage cible choisi ainsi que celui de l'architecture du processeur cible). G&eacute;n&eacute;ralement dans l'IHM de SynDEx on met les identifiants _o et _i aux noms des ports pour indiquer s'ils sont en entr&eacute;es ou sorties.

La macro main_ d&eacute;signe la thread de calcul. Les macros thread_ d&eacute;signent des threads de communication. Par exemple

thread_(USART,RxTx,dsPICmaitre,MacBook)

d&eacute;signe une thread de communication qui connecte notre processeur dsPICmaitre &agrave; un autre processeur nomm&eacute; MacBook (mais dont on ne conna&icirc;t pas l'architecture) via les pins RxTx et utilise le protocole USART (ici norme RS232).

La macro spawn_thread_ d&eacute;signe une fonction cr&eacute;ant une thread de communication (spawn = g&eacute;n&eacute;rer). Par exemple

spawn_thread_(RxTx)

correspond &agrave; la fonction UNIX thread_create. Ici RxTx r&eacute;f&egrave;re au protocole USART.

La compr&eacute;hension des macros loop_ et endloop_ ne pose &agrave; priori pas de probl&egrave;me : elles d&eacute;signent la boucle du programme &agrave; ex&eacute;cuter. On peut choisir diff&eacute;rents types de boucle : finie ou infinie, et peuvent avoir diff&eacute;rents aspects syntaxiques apr&egrave;s le macroprocessing (while ou for en langage C). Tout d&eacute;pend comment l'utilisateur &agrave; d&eacute;cider de macro-processer ce pseudo code. Le code s'ex&eacute;cutant avant loop_ s'appelle la phase d'initialisation et a pour identifiant la macro INIT. Le code apr&egrave;s endloop_ est appel&eacute; phase de terminaison et a pour identifiant la macro END. Le code dans la boucle a pour identifiant la macro LOOP. Nous avons donc trois types de phases. Pour conna&icirc;tre le type phase en cours de macroprocessing, une macro a &eacute;t&eacute; d&eacute;finie et porte le nom de MGC.

Les macros du genre MonGrosCalcul sont des fonctions d&eacute;finies par l'utilisateur. Elle prennent en param&egrave;tre des tableaux allou&eacute;s par les macros alloc_, les lisent et les remplissent (ports d'entr&eacute;e, ports de sortie).

MonGrosCalcul(EnvoiMot_a,prep_message_out)

Comme nous avons trois types diff&eacute;rents de phases (INIT, LOOP, END), la macro MonGrosCalcul peut &ecirc;tre pr&eacute;sente au maximum trois fois (et au minimum une fois) dans la thread de calcul (main_) : une fois par type de phase. Une option dans l'IHM de SynDEx permet de d&eacute;sactiver le dupliqu&acirc;t dans les phases INIT et END. Dans notre exemple, seule la phase d'initialisation est d&eacute;sir&eacute;e.

Les macros loadDnto_ et saveFrom_, sauf erreur de ma part, servent de bootloader au processeur. Dans mon cas, n'utilisant pas de bootloader pour mes microcontr&ocirc;leurs, je n'ai pas plus approfondi l'utilit&eacute; des ces fonctions.

Les macros send_ et receive_ (ex&eacute;cut&eacute;s uniquement dans les threads de communication) servent &agrave; &eacute;changer des donn&eacute;es avec les autres processeurs. Par exemple :

send_(prep_message_out,dsPIC30F,dsPICmaitre,MacBook)

envoie le tout le contenu du tableau prep_message_out de notre
processeur dsPICmaitre (toujours du type dsPIC) &agrave; l'autre processeur
MacBook.

<!--<div class="right"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></div>--></div>
<!-- Subsection: TODO -->
<h2><img class="icone30" src="icons/construction.gif" alt="EN CONSTRUCTION"/></h2>
<div class="boite"> 

        </div>
    </td>
    <!-- END ARTICLE BODY -->

    <!-- BEGIN <div class="right"></div> BORDER -->
    <td id="right_border"> <!-- empty --> </td>
    <!-- END <div class="right"></div> BORDER -->
  </tr>

  <!-- DOCUMENT FOOTER -->
  <tr>
    <td colspan="3" id="footer">
          <!-- BEGIN USER FOOTER -->
          

          
<table width="90%" align="center">
    <tr>
        <td align="center"><h3>Article pr&eacute;c&eacute;dent:</h3></td>
        <td align="center"><h3>Page d'accueil</h3></td>
        <td align="center"><h3>Aller en haut</h3></td>
        <td align="center"><h3>Article suivant:</h3></td>
    </tr>
    <tr>
        <td align="center"><a href="maxplus-fr.html"><img class="icone5" src="icons/2leftarrow.png" alt="ext Prev"/></a></td>
        <td align="center"><a href="index-fr.html"><img class="icone5" src="icons/home.png" alt="home"/></a></td>
        <td align="center"><a href="#top_page"><img class="icone5" src="icons/2uparrow.png" alt="up"/></a></td>
        <td align="center"><a href="bsp-fr.html"><img class="icone5" src="icons/2rightarrow.png" alt="Next"/></a></td>
    </tr>
    <tr>
        <td align="center">Bo&icirc;te &agrave; outils Max+</td>
        <td align="center"></td>
        <td align="center"></td>
        <td align="center">El&eacute;mination des parties cach&eacute;es</td>
    </tr>
</table>
          <!-- END USER FOOTER -->
    </td>
  </tr>
</table>
<!-- HTML EOF -->
</body>
</html>

<!-- This page was generated by script Sun 29 Sep 19 -->
